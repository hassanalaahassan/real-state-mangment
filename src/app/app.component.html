<div class="flex min-h-screen bg-gray-50">
  <!-- Sidebar -->
  <app-sidebar
    [isCollapsed]="sidebarCollapsed()"
    (toggle)="layoutStore.toggleSidebar()"
    class="z-30">
  </app-sidebar>

  <!-- Main Content -->
  <main
    [class]="mainContentClasses()"
    class="flex-1 transition-all duration-300 min-w-0">

    <!-- Top Bar -->
    <app-top-bar
      [pageTitle]="pageTitle()"
      [pageSubtitle]="pageSubtitle()"
      [showUserMenu]="showUserMenu()"
      [isMobile]="isMobileView()"
      (toggleSidebar)="toggleSidebarMobile($event)"
      (toggleUserMenu)="toggleUserMenu($event)"
      (closeUserMenu)="closeUserMenu()">
    </app-top-bar>

    <!-- Page Content -->
    <div class="p-6">
      <router-outlet></router-outlet>
    </div>
  </main>
</div>

<!-- Mobile Overlay -->
@if (!sidebarCollapsed() && isMobile()) {
<div
  class="fixed inset-0 bg-black bg-opacity-50 z-20 md:hidden animate-fade-in"
  (click)="layoutStore.setSidebar(true)">
</div>
}
